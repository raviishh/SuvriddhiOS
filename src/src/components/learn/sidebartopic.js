import { jsx as _jsx, jsxs as _jsxs } from "preact/jsx-runtime";
import { useStore } from "../../store/useStore";
import ProgressRing from "./progressring";
import { Book, Code2, ChevronDown, Check } from "lucide-preact";
export default function SidebarTopic({ topic, expanded, onToggle, activeItemId, onOpenItem, topicProgress }) {
    const { completed } = useStore();
    return (_jsxs("div", { className: "mb-4", children: [_jsxs("button", { onClick: () => onToggle(topic.id), className: "w-full flex items-center justify-between rounded-md p-3 hover:bg-secondary", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { children: _jsx(ProgressRing, { progress: topicProgress }) }), _jsxs("div", { className: "text-left", children: [_jsx("div", { className: "text-sm font-semibold", children: topic.title }), _jsxs("div", { className: "text-xs text-muted-foreground", children: [topic.items.length, " items"] })] })] }), _jsx("div", { className: "flex items-center ml-4 gap-3", children: _jsx(ChevronDown, { className: `transition-transform ${expanded ? "rotate-180" : ""}` }) })] }), expanded && (_jsx("div", { className: "mt-2 ml-6", children: topic.items.map((it) => (_jsxs("div", { className: "flex items-center justify-between py-2", children: [_jsxs("button", { onClick: () => onOpenItem(topic.id, it.id), className: `text-left w-full hover:text-primary flex text-sm items-center gap-3 ${activeItemId === it.id ? "text-primary" : ""}`, children: [_jsx("span", { className: "w-3 mr-2 inline-block", children: it.type === "lesson" ? _jsx(Book, { size: 16 }) : _jsx(Code2, { size: 16 }) }), _jsx("span", { className: "truncate flex-1", children: it.title })] }), Object.hasOwn(completed, it.id) && (_jsx("span", { className: "ml-2 text-primary", children: _jsx(Check, { className: "w-4 h-4" }) }))] }, it.id))) }))] }));
}
